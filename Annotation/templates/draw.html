{% extends 'base.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'css/annotation.css' %}">
<link href="{% static 'css/layout/cpanel-font-awesome.css' %}" rel="stylesheet" />
<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="{% static 'scripts/annotation.js' %}"></script>
<script type="text/javascript">
	pageNumber = 1;
	$(document).ready(function () {
		$("#btnNext").click(function (e) {
			if (pageNumber < $("#pageCount").val())
				pageNumber += 1;
			showImage();
		});

		$("#btnPrevious").click(function (e) {
			if (pageNumber > 1)
				pageNumber -= 1;
			showImage();
		});

		showImage();
		function showImage() {
			$.ajax({
				type: 'POST',
				url: '{{ ajaxUrl }}/get_image/',
				data: {
					'page_num': pageNumber,
					csrfmiddlewaretoken: '{{ csrf_token }}',
				},
				success: function (data) {
					initCanvas(data);
					document.getElementById("spnPaging").innerHTML = pageNumber + " of {{imagesCount}}";
				},
				error: function (xhr, textStatus, errorThrown) {
					alert("error: " + xhr + "-" + textStatus + "-" + errorThrown);
				}
			});
		}
	});
</script>

<body>
	<div class="wrapper">
		<div style="text-align: center;">
			<div id="dvCanvasContainer">
				<canvas id="drawCanvas"></canvas>
				<canvas id="selectCanvas" style="visibility: hidden;"></canvas>
			</div>
			<div style="display: inline-block; width:70px;">
				<input type="button" value="save" id="btn" class="btn btn-primary" style="width:60px; margin-bottom:5px;" onclick="saveFile()">
				<input type="button" value="clear" id="clr" class="btn btn-primary" style="width:60px; margin-bottom:5px;" onclick="clearCanvas()">
				<button id="btnOpenFile1" class="btn btn-primary" style="width:60px; margin-bottom:5px;">Load</button>
				<input id="fileInput1" type="file" name="name" style="display: none;" />
				<input type="button" value="select" id="select" class="btn btn-primary" style="width:60px;" onclick="beginSelect()">
			</div>
		</div>

	</div>
	<br/>
	<input id="pageCount" type="hidden" value="{{imagesCount}}">
	<div style="text-align: center;">
		<button class="btn" id="btnPrevious">
			<i class="icon-step-backward"></i>
		</button>
		<span id="spnPaging" style="margin-right: 5px; margin-left: 5px"></span>
		<button class="btn" id="btnNext">
			<i class="icon-step-forward"></i>
		</button>
	</div>
</body>
{% endblock %}