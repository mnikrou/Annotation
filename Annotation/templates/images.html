{% extends 'base_cpanel.html' %} {% load static %} {% block content %}
<link rel="stylesheet" href="{% static 'css/images.css' %}" />
<script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
<script type="text/javascript">
    pageNumber = 1;
    $(document).ready(function () {
        loadImages();
        function loadImages() {
            $.ajax({
                type: 'POST',
                url: '/load_images/',
                data: {
                    'page_num': pageNumber,
                    csrfmiddlewaretoken: '{{ csrf_token }}',
                },
                success: function (data) {
                    
                },
                error: function (xhr, textStatus, errorThrown) {
                    alert("error: " + xhr + "-" + textStatus + "-" + errorThrown);
                }
            });
        }
    });

    function deleteImage(id) {
        $.ajax({
            type: 'POST',
            url: '/delete_image/',
            data: {
                'id': id,
                csrfmiddlewaretoken: '{{ csrf_token }}',
            },
            success: function (data) {
            },
            error: function (xhr, textStatus, errorThrown) {
                console.log("error: " + xhr + "-" + textStatus + "-" + errorThrown);
            }
        });
    }
</script>

<body>
    <div class="inner" style="min-height:1200px;">
        <div class="row">
            <div class="col-lg-12">
                <h2>Images</h2>
            </div>
        </div>
        <hr />
        <div class="row">
            <div class="body collapse in">
                <div style="margin-left: 61px;">
                    <a class="btn btn-primary" href="{% url 'upload_image' %}" class="menu-top-active">Add</a>
                </div>
            </div>
            <br/> {% if images %}
            <div style="margin-left: 60px; width: 100%;">
                {% for image in images %}
                <!-- <a class="image" id="{{ image.img.id }}" href="{{ image.img.url }}" title="{{ image.img.id }}">
                <img src="{{ image.img.url }}" alt="" style="width: 200px; height: 200px; margin-bottom: 5px" />
                <a href="#" class="delete">Delete</a>
            </a> -->
                <div class="show-image">
                    <img src="{{ image.img.url }}" alt="" style="width: 200px; height: 200px; margin-bottom: 5px" />
                    <button class="btn btn-primary btn-circle btn-line" style="top:0; left:0;" onclick=deleteImage({{image.id}})>
                        <a class="icon-eye-open" href="{{ image.img.url }}"></a>
                    </button>
                    <input class="btn btn-danger btn-circle btn-line" type="button" value="X" style="top:0; left:85%;" />
                </div>
                {% endfor %}
            </div>
            {% else %}
            <p>No images.</p>
            {% endif %}
        </div>
        <br/>
        <div class="row">
            <div style="text-align: center;">
                <button class="btn" id="btnPrevious">
                    <i class="icon-step-backward"></i>
                </button>
                <span id="spnPaging" style="margin-right: 5px; margin-left: 5px"></span>
                <button class="btn" id="btnNext">
                    <i class="icon-step-forward"></i>
                </button>
            </div>
        </div>
        <hr />
    </div>
</body>> {% endblock %}